<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang xml:lang>
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <meta name="author" content="Michel Billaud (michel.billaud@laposte.net)" />
  <title>Corrigé Sujet 1 épreuve pratique NSI</title>
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    span.underline{text-decoration: underline;}
    div.column{display: inline-block; vertical-align: top; width: 50%;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        color: #aaaaaa;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
    div.sourceCode
      {   }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span.al { color: #ff0000; font-weight: bold; } /* Alert */
    code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
    code span.at { color: #7d9029; } /* Attribute */
    code span.bn { color: #40a070; } /* BaseN */
    code span.bu { } /* BuiltIn */
    code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
    code span.ch { color: #4070a0; } /* Char */
    code span.cn { color: #880000; } /* Constant */
    code span.co { color: #60a0b0; font-style: italic; } /* Comment */
    code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
    code span.do { color: #ba2121; font-style: italic; } /* Documentation */
    code span.dt { color: #902000; } /* DataType */
    code span.dv { color: #40a070; } /* DecVal */
    code span.er { color: #ff0000; font-weight: bold; } /* Error */
    code span.ex { } /* Extension */
    code span.fl { color: #40a070; } /* Float */
    code span.fu { color: #06287e; } /* Function */
    code span.im { } /* Import */
    code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
    code span.kw { color: #007020; font-weight: bold; } /* Keyword */
    code span.op { color: #666666; } /* Operator */
    code span.ot { color: #007020; } /* Other */
    code span.pp { color: #bc7a00; } /* Preprocessor */
    code span.sc { color: #4070a0; } /* SpecialChar */
    code span.ss { color: #bb6688; } /* SpecialString */
    code span.st { color: #4070a0; } /* String */
    code span.va { color: #19177c; } /* Variable */
    code span.vs { color: #4070a0; } /* VerbatimString */
    code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
  </style>
  <style type="text/css">a.sourceLine {
display: inline-block;
line-height: 1.25;
}
a.sourceLine {
pointer-events: none;
color: inherit;
text-decoration: inherit;
}
a.sourceLine:empty {
height: 1.2em;
}
.sourceCode {
overflow: visible;
}
code.sourceCode {
white-space: pre;
position: relative;
}
div.sourceCode {
margin: 1em 0;
}
pre.sourceCode {
margin: 0;
}
@media screen {
div.sourceCode {
overflow: auto;
}
}
@media print {
code.sourceCode {
white-space: pre-wrap;
}
a.sourceLine {
text-indent: -1em;
padding-left: 1em;
}
}
pre.numberSource a.sourceLine {
position: relative;
left: -4em;
}
pre.numberSource a.sourceLine::before {
content: attr(title);
position: relative;
left: -1em;
text-align: right;
vertical-align: baseline;
border: none;
pointer-events: all;
display: inline-block;
-webkit-touch-callout: none;
-webkit-user-select: none;
-khtml-user-select: none;
-moz-user-select: none;
-ms-user-select: none;
user-select: none;
padding: 0 4px;
width: 4em;
color: #aaaaaa;
}
pre.numberSource {
margin-left: 3em;
border-left: 1px solid #aaaaaa;
padding-left: 4px;
}
div.sourceCode {}
@media screen {
a.sourceLine::before {
text-decoration: underline;
}
}
code span.al {
color: #ff0000;
font-weight: bold;
}

code span.an {
color: #60a0b0;
font-weight: bold;
font-style: italic;
}

code span.at {
color: #7d9029;
}

code span.bn {
color: #40a070;
}

code span.bu {}

code span.cf {
color: #007020;
font-weight: bold;
}

code span.ch {
color: #4070a0;
}

code span.cn {
color: #880000;
}

code span.co {
color: #60a0b0;
font-style: italic;
}

code span.cv {
color: #60a0b0;
font-weight: bold;
font-style: italic;
}

code span.do {
color: #ba2121;
font-style: italic;
}

code span.dt {
color: #902000;
}

code span.dv {
color: #40a070;
}

code span.er {
color: #ff0000;
font-weight: bold;
}

code span.ex {}

code span.fl {
color: #40a070;
}

code span.fu {
color: #06287e;
}

code span.im {}

code span.in {
color: #60a0b0;
font-weight: bold;
font-style: italic;
}

code span.kw {
color: #007020;
font-weight: bold;
}

code span.op {
color: #666666;
}

code span.ot {
color: #007020;
}

code span.pp {
color: #bc7a00;
}

code span.sc {
color: #4070a0;
}

code span.ss {
color: #bb6688;
}

code span.st {
color: #4070a0;
}

code span.va {
color: #19177c;
}

code span.vs {
color: #4070a0;
}

code span.wa {
color: #60a0b0;
font-weight: bold;
font-style: italic;
}


:root {
--title-color: #202080;
--source-bg-color: rgb(240, 240, 255);
}
h1, h2, h3, h4, h5, h6 {
border-bottom: solid 1px silver;
color: var(--title-color);
}
body {
font-family: 'Gill Sans', 'Gill Sans MT', Calibri, 'Trebuchet MS', sans-serif;
}
div.sourceCode {
background-color: var(--source-bg-color);
padding: 1em;
}
#TOC {
padding: 0.5em;
border: solid 1px silver;
}
#TOC ul {
list-style-type: none;
padding-left: 1em;
}
nav:before {
text-indent: 2em;
content: "Sommaire";
color: var(--title-color);
font-weight: bold;
font-size: large;
}
#TOC a {
text-decoration: none;
}
header {
text-align: center;
}
.title {
}
.author, .date {
font-style: italic;
}
table, th, td {
border-collapse: collapse;
border: solid black 1px;
padding: 0.5em;
}
</style>
</head>
<body>
<header id="title-block-header">
<h1 class="title">Corrigé Sujet 1 épreuve pratique NSI</h1>
<p class="author">Michel Billaud (<code>michel.billaud@laposte.net</code>)</p>
<p class="date">30 janvier 2022</p>
</header>
<nav id="TOC" role="doc-toc">
<ul>
<li><a href="#licence"><span class="toc-section-number">1</span> Licence</a></li>
<li><a href="#le-sujet"><span class="toc-section-number">2</span> Le sujet</a></li>
<li><a href="#exercice-1-nombre-doccurrences-dun-caractère-dans-un-mot"><span class="toc-section-number">3</span> Exercice 1 : nombre d’occurrences d’un caractère dans un mot</a>
<ul>
<li><a href="#la-question"><span class="toc-section-number">3.1</span> La question</a></li>
<li><a href="#solution-1-itération-et-comptage"><span class="toc-section-number">3.2</span> Solution 1 : itération et comptage</a></li>
<li><a href="#solution-2-sous-liste-en-intension-et-comptage"><span class="toc-section-number">3.3</span> Solution 2 : sous-liste en intension et comptage</a></li>
<li><a href="#solution-3-la-méthode-count-des-chaînes"><span class="toc-section-number">3.4</span> Solution 3 : la méthode <code>count</code> des chaînes</a></li>
<li><a href="#solution-4-récursion-structurelle-naïve"><span class="toc-section-number">3.5</span> Solution 4 : récursion structurelle naïve</a></li>
<li><a href="#critique-de-la-solution-récursive-naïve"><span class="toc-section-number">3.6</span> Critique de la solution récursive naïve</a></li>
<li><a href="#solution-5-sauvons-la-récursion"><span class="toc-section-number">3.7</span> Solution 5 : Sauvons la récursion !</a></li>
<li><a href="#solution-6-récursion-avec-variable-tampon"><span class="toc-section-number">3.8</span> Solution 6 : Récursion avec variable tampon</a></li>
</ul></li>
<li><a href="#exercice-2-rendu-de-monnaie"><span class="toc-section-number">4</span> Exercice 2 : rendu de monnaie</a>
<ul>
<li><a href="#la-question-1"><span class="toc-section-number">4.1</span> La question</a></li>
<li><a href="#résolution"><span class="toc-section-number">4.2</span> Résolution</a></li>
<li><a href="#corrigé"><span class="toc-section-number">4.3</span> Corrigé</a></li>
</ul></li>
</ul>
</nav>
<ul>
<li>mise à jour 1er février, complément sur les versions récursives</li>
</ul>
<h1 data-number="1" id="licence"><span class="header-section-number">1</span> Licence</h1>
<p><img src="data:image/png;base64,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" /></p>
<p>Cette collection de notes est mise à disposition selon les termes de la <a href="http://creativecommons.org/licenses/by-nc-sa/2.0/fr/">Licence Creative Commons Attribution - Pas d’Utilisation Commerciale - Partage dans les Mêmes Conditions 2.0 France</a>.</p>
<ul>
<li>Les notes sont publiées dans <a href="https://www.mbillaud.fr/notes/" class="uri">https://www.mbillaud.fr/notes/</a></li>
<li>Sources dans <a href="https://github.com/MichelBillaud/notes-diverses" class="uri">https://github.com/MichelBillaud/notes-diverses</a></li>
</ul>
<h1 data-number="2" id="le-sujet"><span class="header-section-number">2</span> Le sujet</h1>
<p>Se trouve sur la page <a href="https://eduscol.education.fr/2661/banque-des-epreuves-pratiques-de-specialite-nsi" class="uri">https://eduscol.education.fr/2661/banque-des-epreuves-pratiques-de-specialite-nsi</a>, dans <a href="https://eduscol.education.fr/document/33178/download" class="uri">https://eduscol.education.fr/document/33178/download</a></p>
<h1 data-number="3" id="exercice-1-nombre-doccurrences-dun-caractère-dans-un-mot"><span class="header-section-number">3</span> Exercice 1 : nombre d’occurrences d’un caractère dans un mot</h1>
<h2 data-number="3.1" id="la-question"><span class="header-section-number">3.1</span> La question</h2>
<blockquote>
<p><strong>Question</strong> : Écrire une fonction <code>recherche</code> qui prend en paramètres <code>caractere</code>, un caractère, et <code>mot</code>, une chaîne de caractères, et qui renvoie le nombre d’occurrences de <code>caractere</code> dans <code>mot</code>, c’est-à-dire le nombre de fois où <code>caractere</code> apparaît dans <code>mot</code>.</p>
</blockquote>
<p>Clairement, le souhait est de normaliser le choix des noms - ça facilite les corrections -, on ne laisse pas d’autre possibilité que de commencer par</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true"></a><span class="kw">def</span> recherche(caractere, mot):</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true"></a>   ...</span></code></pre></div>
<p><strong>Critique</strong> : le nom imposé <code>recherche</code> est assez malheureux. L’usage est que le nom d’une fonction décrive le résultat qu’elle calcule. “Recherche”, ça ne dit pas ce qui est recherché. La première position du caractère dans le mot ? juste un booléen qui dit si on l’a trouvé ? …</p>
<p>Bref, un nom comme <code>nombre_occurrences</code> ou <code>nb_occurrences</code> aurait été plus approprié.</p>
<h2 data-number="3.2" id="solution-1-itération-et-comptage"><span class="header-section-number">3.2</span> Solution 1 : itération et comptage</h2>
<p>Une solution simple, dans le style impératif, est de</p>
<ul>
<li>regarder le mot caractère par caractère, avec une boucle (<code>for c in mot: ...</code>)</li>
<li>comparer avec le caractère cherché -<code>if c == caractere:</code></li>
<li>et si ça colle, ajouter 1 à un compteur (variable locale de la fonction)
<ul>
<li>initialisé à 0 avant la boucle</li>
<li>et dont la valeur sera retournée comme résultat de la fonction</li>
</ul></li>
</ul>
<div class="sourceCode" id="cb2"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true"></a><span class="kw">def</span> recherche(caractere, mot):</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true"></a>    nb <span class="op">=</span> <span class="dv">0</span>                    <span class="co"># nombre d&#39;occurrences, 0 au départ</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true"></a>    <span class="cf">for</span> c <span class="kw">in</span> mot:             <span class="co"># pour chaque caractère c du mot</span></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true"></a>        <span class="cf">if</span> c <span class="op">==</span> caractere:    <span class="co">#   - est-ce le bon ?</span></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true"></a>            nb <span class="op">+=</span> <span class="dv">1</span>           <span class="co">#   - oui ! un de plus !</span></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true"></a>    <span class="cf">return</span> nb                 <span class="co"># et voilà le total.</span></span></code></pre></div>
<p>Je suppose que c’est la solution à laquelle les correcteurs s’attendent le plus. Mais on peut faire autrement.</p>
<h2 data-number="3.3" id="solution-2-sous-liste-en-intension-et-comptage"><span class="header-section-number">3.3</span> Solution 2 : sous-liste en intension et comptage</h2>
<p>Une chaîne de caractères est aussi une liste de caractères. À ce titre,</p>
<ul>
<li>on peut en extraire facilement la sous-liste de caractères qui nous plaisent (qui sont égaux à ceux qu’on cherche), par <code>[ c in mot if c == caractere ]</code></li>
<li>et il ne reste plus qu’à retourner la longueur(<code>len</code>) de cette liste.</li>
</ul>
<div class="sourceCode" id="cb3"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true"></a><span class="kw">def</span> recherche(caractere, mot):</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true"></a>    <span class="cf">return</span> <span class="bu">len</span>([c <span class="cf">for</span> c <span class="kw">in</span> mot <span class="cf">if</span> c <span class="op">==</span> caractere])</span></code></pre></div>
<h2 data-number="3.4" id="solution-3-la-méthode-count-des-chaînes"><span class="header-section-number">3.4</span> Solution 3 : la méthode <code>count</code> des chaînes</h2>
<p>Quand on connaît le langage Python, on sait que les chaînes sont des séquences qui ont une méthode <code>count</code> qui retourne le nombre d’occurrences d’une sous-séquence.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true"></a><span class="kw">def</span> recherche3(caractere, mot):</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true"></a>    <span class="cf">return</span> mot.count(caractere)      </span></code></pre></div>
<p>bref, c’est tout fait.</p>
<h2 data-number="3.5" id="solution-4-récursion-structurelle-naïve"><span class="header-section-number">3.5</span> Solution 4 : récursion structurelle naïve</h2>
<p>Sachant que</p>
<ul>
<li>une chaîne est vide ou pas,</li>
<li>si elle est vide, elle contient 0 occurrence de quoi que ce soit,</li>
<li>si elle n’est pas vide, elle est composée d’un premier caractère et d’une suite;</li>
<li>ce caractère est celui qu’on cherche, ou pas ;</li>
</ul>
<p>on peut s’orienter vers une solution récursive</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true"></a><span class="kw">def</span> recherche(caractere, mot):</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true"></a>    <span class="cf">if</span> <span class="bu">len</span>(mot) <span class="op">==</span> <span class="dv">0</span>:</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true"></a>        <span class="cf">return</span> <span class="dv">0</span></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true"></a>    <span class="cf">else</span>:</span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true"></a>        premier <span class="op">=</span> mot[<span class="dv">0</span>]</span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true"></a>        suite <span class="op">=</span> mot[<span class="dv">1</span>:]</span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true"></a>        <span class="cf">if</span> premier <span class="op">==</span> caractere:</span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true"></a>            <span class="cf">return</span> <span class="dv">1</span> <span class="op">+</span> recherche(caractere, suite)</span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true"></a>        <span class="cf">else</span>:</span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true"></a>            <span class="cf">return</span> recherche(caractere, suite)</span></code></pre></div>
<p>qu’on peut présenter de diverses façons équivalentes, plus ou moins détaillées, par exemple en utilisant seulement une variable pour le nombre d’occurrences qui figurent dans la suite :</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true"></a><span class="kw">def</span> recherche(caractere, mot):</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true"></a>    <span class="cf">if</span> <span class="bu">len</span>(mot) <span class="op">==</span> <span class="dv">0</span>:</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true"></a>        <span class="cf">return</span> <span class="dv">0</span></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true"></a>    <span class="cf">else</span>:</span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true"></a>        nb_occ_suite <span class="op">=</span> recherche(mot[<span class="dv">1</span>:])</span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true"></a>        <span class="cf">if</span> mot[<span class="dv">0</span>] <span class="op">==</span> caractere:</span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true"></a>            <span class="cf">return</span> <span class="dv">1</span> <span class="op">+</span> nb_occ_suite</span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true"></a>        <span class="cf">else</span>:</span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true"></a>            <span class="cf">return</span> nb_occ_suite</span></code></pre></div>
<p>ou encore, en jonglant avec les expressions conditionnelles de Python</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true"></a><span class="kw">def</span> recherche (caractere, mot):</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true"></a>    <span class="cf">return</span> <span class="dv">0</span> <span class="cf">if</span> <span class="bu">len</span>(mot) <span class="op">==</span> <span class="dv">0</span> <span class="cf">else</span> (</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true"></a>           recherche(caractere, mot[<span class="dv">1</span>:])</span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true"></a>              <span class="op">+</span> (<span class="dv">1</span> <span class="cf">if</span> caractere <span class="op">==</span> mot[<span class="dv">0</span>] <span class="cf">else</span> <span class="dv">0</span>))</span></code></pre></div>
<p>qui se lit :</p>
<ul>
<li>retourner 0 si le mot est vide</li>
<li>ou alors le nombre d’occurrences du caractère dans la suite, avec 1 de plus si le premier caractère du mot était le bon.</li>
</ul>
<h2 data-number="3.6" id="critique-de-la-solution-récursive-naïve"><span class="header-section-number">3.6</span> Critique de la solution récursive naïve</h2>
<p>Cette solution fournit un résultat correcte, mais elle a un défaut, sa <strong>complexité temporelle</strong>, liée au fait que la construction de <code>mot[1:]</code> pour un mot de taille <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>n</mi><annotation encoding="application/x-tex">n</annotation></semantics></math> implique une copie des <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi><mo>−</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">n-1</annotation></semantics></math> éléments concernés dans une nouvelle liste.</p>
<p>En gros, si on part d’un mot de 10 lettres, le passage au sous-mot de 9 lettres nécessitera de copier 9 éléments. Mais pour traiter ce mot de 9 lettres, il faudra aussi faire une copie du sous-mot de 8 lettres, et le traiter.</p>
<p>Bref, tout ça va nous coûter 9+8+….+1 étapes. Pour un mot de taille <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>n</mi><annotation encoding="application/x-tex">n</annotation></semantics></math>, ça nous fera <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mfrac><mrow><mi>n</mi><mo stretchy="false" form="prefix">(</mo><mi>n</mi><mo>+</mo><mn>1</mn><mo stretchy="false" form="postfix">)</mo></mrow><mn>2</mn></mfrac><annotation encoding="application/x-tex">\frac{n(n+1)}{2}</annotation></semantics></math> étapes, une quantité qui grandit comme le carré de <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>n</mi><annotation encoding="application/x-tex">n</annotation></semantics></math>. On parle de complexité temporelle <strong>quadratique</strong>.</p>
<p>Comme nous disposons d’une autre solution (itérative) qui n’est pas compliquée et qui fait le calcul en un temps qui est simplement proportionnel à <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>n</mi><annotation encoding="application/x-tex">n</annotation></semantics></math> (complexité <strong>linéaire</strong>), en pratique, on n’utilisera évidemment pas la solution récursive présentée ci-dessus.</p>
<h2 data-number="3.7" id="solution-5-sauvons-la-récursion"><span class="header-section-number">3.7</span> Solution 5 : Sauvons la récursion !</h2>
<p>Ceci ne veut pas dire <strong>du tout</strong> qu’une approche récursive soit <strong>intrinsèquement</strong> inefficace.</p>
<p>Ce qui coûte ici, c’est de faire la <strong>copie</strong> de la fin du mot, pour la passer en paramètre.</p>
<p>À la place, on peut passer le mot inchangé, et un paramètre qui indique l’indice du premier caractère restant à traiter.</p>
<p>Ce qu’on peut présenter sous cette forme</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true"></a><span class="kw">def</span> recherche(caractere, mot, debut <span class="op">=</span> <span class="dv">0</span>):</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true"></a>    <span class="cf">if</span> debut <span class="op">==</span> <span class="bu">len</span>(mot):</span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true"></a>        <span class="cf">return</span> <span class="dv">0</span></span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true"></a>    <span class="cf">else</span>:</span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true"></a>        r <span class="op">=</span> recherche(caractere, mot, debut <span class="op">+</span> <span class="dv">1</span>)</span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true"></a>        <span class="cf">if</span> caractere <span class="op">==</span> mot[debut]:</span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true"></a>            <span class="cf">return</span> r <span class="op">+</span> <span class="dv">1</span></span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true"></a>        <span class="cf">else</span>:</span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true"></a>            <span class="cf">return</span> r</span></code></pre></div>
<p>Ce coup-ci, le temps de calcul est linéaire.</p>
<p>On retrouve cette manière de faire une récursion sur une sous-liste dans l’exercice précédent.</p>
<p><strong>Note</strong> : les <em>expressions conditionnelles</em> de Python permettent de réduire les 4 dernières lignes à</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true"></a>    <span class="cf">return</span>  r <span class="op">+</span> <span class="dv">1</span>  <span class="cf">if</span> caractere <span class="op">==</span> mot[debut]  <span class="cf">else</span> r</span></code></pre></div>
<p>qui se lit naturellement “retourne r+1 si ceci-cela, et 0 sinon”.</p>
<h2 data-number="3.8" id="solution-6-récursion-avec-variable-tampon"><span class="header-section-number">3.8</span> Solution 6 : Récursion avec variable tampon</h2>
<p>Profitons de l’occasion pour utiliser la technique de la “variable tampon”, qui est également présente dans l’exercice suivant.</p>
<p>En gros, on se sert d’un paramètre supplémentaire qui sert à construire le résultat final. Ici, <code>total</code> indiquera le nombre d’occurrences trouvé jusque là.</p>
<p>Quand la récursion est terminée, la fonction retourne le contenu du tampon</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true"></a><span class="kw">def</span> recherche(caractere, mot, debut <span class="op">=</span> <span class="dv">0</span>, total <span class="op">=</span> <span class="dv">0</span>):</span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true"></a>    <span class="cf">if</span> debut <span class="op">==</span> <span class="bu">len</span>(mot):</span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true"></a>        <span class="cf">return</span> total</span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true"></a>    t <span class="op">=</span> <span class="dv">1</span>  <span class="cf">if</span> caractere <span class="op">==</span> mot[debut]  <span class="cf">else</span> <span class="dv">0</span> </span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true"></a>    <span class="cf">return</span> recherche(caractere, mot, debut <span class="op">+</span> <span class="dv">1</span>, total <span class="op">+</span> t)</span></code></pre></div>
<p>La technique du paramètre tampon est souvent utilisée pour obtenir un algorithme récursif où la récursion est terminale (c’est-à-dire que l’appel récursif est la dernière chose qu’on fait dans la fonction).</p>
<p>L’intérêt de la récursion terminale, c’est que l’interprète n’a rien à mémoriser dans la pile lors de l’appel, et peut même transformer l’appel récursif en boucle. Comme on n’empile rien, la taille de la pile utilisée reste constante (si l’interprète est bien fait), au lieu de croître linéairement avec les versions récursives précédentes.</p>
<p>Ce qui nous ramène au premier algorithme, avec la correspondance entre <code>debut</code> et <code>i</code> pour les indices, et <code>total</code> avec <code>nb</code> pour les compteurs.</p>
<h1 data-number="4" id="exercice-2-rendu-de-monnaie"><span class="header-section-number">4</span> Exercice 2 : rendu de monnaie</h1>
<h2 data-number="4.1" id="la-question-1"><span class="header-section-number">4.1</span> La question</h2>
<p>Un bout de programme Python à trous, à compléter</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true"></a>Pieces <span class="op">=</span> [<span class="dv">100</span>,<span class="dv">50</span>,<span class="dv">20</span>,<span class="dv">10</span>,<span class="dv">5</span>,<span class="dv">2</span>,<span class="dv">1</span>]</span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true"></a></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true"></a><span class="kw">def</span> rendu_glouton(arendre, solution<span class="op">=</span>[], i<span class="op">=</span><span class="dv">0</span>):</span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true"></a>    <span class="cf">if</span> arendre <span class="op">==</span> <span class="dv">0</span>:</span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true"></a>        <span class="cf">return</span> ...                                    <span class="co"># 1</span></span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true"></a>    p <span class="op">=</span> pieces[i]                                     <span class="co"># </span><span class="al">BUG</span></span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true"></a>    <span class="cf">if</span> p <span class="op">&lt;=</span> ... :                                     <span class="co"># 2</span></span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true"></a>        solution.append(...)                          <span class="co"># 3</span></span>
<span id="cb11-9"><a href="#cb11-9" aria-hidden="true"></a>        <span class="cf">return</span> rendu_glouton(arendre <span class="op">-</span> p, solution, i)</span>
<span id="cb11-10"><a href="#cb11-10" aria-hidden="true"></a>    <span class="cf">else</span> :</span>
<span id="cb11-11"><a href="#cb11-11" aria-hidden="true"></a>        <span class="cf">return</span> rendu_glouton(arendre, solution, ...)  <span class="co"># 4</span></span></code></pre></div>
<p>comportement attendu</p>
<pre><code>&gt;&gt;&gt;rendu_glouton_r(68,[],0)
[50, 10, 5, 2, 1]
&gt;&gt;&gt;rendu_glouton_r(291,[],0)
[100, 100, 50, 20, 20, 1]</code></pre>
<p><strong>Critiques</strong> :</p>
<ul>
<li>Erreur dans le sujet. Le nom de la variable globale <code>Pieces</code> commence par une majuscule, il est utilisé sans.</li>
<li>Les concepteurs du sujet ont du mal à respecter les conventions de programmation, qui disent que les morceaux d’un nom (de variable, de méthode) sont séparés par des “underscores”. Donc <code>a_rendre</code>, et pas <code>arendre</code>.</li>
<li>Et le nom d’une constante globale (les pièces) devrait être en majuscule (<code>PIECES</code>).</li>
</ul>
<p>À ces considérations syntaxiques, dont les rédacteurs du sujet semblent ignorer autant l’existence <a href="https://www.python.org/dev/peps/pep-0008" class="uri">https://www.python.org/dev/peps/pep-0008</a> que l’importance (y compris pédagogique), s’ajoute</p>
<ul>
<li>Manque de cohérence : si on définit des valeurs par défaut aux paramètres, c’est pour ne pas avoir à les indiquer lors des appels. Les exemples devraient être</li>
</ul>
<pre><code>&gt;&gt;&gt;rendu_glouton_r(68)
[50, 10, 5, 2, 1]
&gt;&gt;&gt;rendu_glouton_r(291)
[100, 100, 50, 20, 20, 1]</code></pre>
<h2 data-number="4.2" id="résolution"><span class="header-section-number">4.2</span> Résolution</h2>
<p>Il n’y a jamais que 4 trous à compléter.</p>
<p>Quelques observations</p>
<ul>
<li>l’exécution des exemples montre qu’il faut retourner une liste. Ça servira sûrement pour le trou numéro 1.</li>
<li>au cours des appels, le second paramètre est une liste vide au départ (valeur par défaut) qui se remplit (trou 3).</li>
<li>le troisième paramètre <code>i</code> est un indice dans le tableau <code>Pieces</code> (ligne du bug, initialement la première. Il faudra bien le faire avancer un jour (trou 4).</li>
</ul>
<p>Il parait donc raisonnable</p>
<ul>
<li>que quand on n’a plus de monnaie à rendre (<code>arendre == 0</code>), on retourne la solution qu’on a construite ; <code>return solution # 1</code> ;</li>
<li>qu’on compare la valeur d’une pièce avec la somme à rendre <code>if p &lt;= arendre:  #2</code> pour savoir si il faut rendre cette pièce ou pas ;</li>
<li>que si oui, on ajoute la pièce dans la solution <code>solution.append(p) # 3</code>.</li>
<li>et que sinon, on rende la monnaie avec des pièces de valeurs plus faibles, qui sont plus loin dans la liste <code>return     rendu_glouton(arendre, solution, i + 1) # 4</code></li>
</ul>
<h2 data-number="4.3" id="corrigé"><span class="header-section-number">4.3</span> Corrigé</h2>
<div class="sourceCode" id="cb14"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true"></a>PIECES <span class="op">=</span> [<span class="dv">100</span>, <span class="dv">50</span>, <span class="dv">20</span>, <span class="dv">10</span>, <span class="dv">5</span>, <span class="dv">2</span>, <span class="dv">1</span>]</span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true"></a></span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true"></a><span class="kw">def</span> rendu_glouton(a_rendre, solution <span class="op">=</span> [], i <span class="op">=</span> <span class="dv">0</span>):</span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true"></a>    <span class="cf">if</span> a_rendre <span class="op">==</span> <span class="dv">0</span>:</span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true"></a>        <span class="cf">return</span> solution                                  <span class="co"># 1</span></span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true"></a>    p <span class="op">=</span> PIECES[i]               </span>
<span id="cb14-7"><a href="#cb14-7" aria-hidden="true"></a>    <span class="cf">if</span> p <span class="op">&lt;=</span> a_rendre:                                    <span class="co"># 2</span></span>
<span id="cb14-8"><a href="#cb14-8" aria-hidden="true"></a>        solution.append(p)                               <span class="co"># 3</span></span>
<span id="cb14-9"><a href="#cb14-9" aria-hidden="true"></a>        <span class="cf">return</span> rendu_glouton(a_rendre <span class="op">-</span> p, solution, i)</span>
<span id="cb14-10"><a href="#cb14-10" aria-hidden="true"></a>    <span class="cf">else</span> :</span>
<span id="cb14-11"><a href="#cb14-11" aria-hidden="true"></a>        <span class="cf">return</span> rendu_glouton(a_rendre, solution, i <span class="op">+</span> <span class="dv">1</span>)  <span class="co"># 4</span></span></code></pre></div>
</body>
</html>
